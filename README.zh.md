# CapCut Mate API

### ğŸŒ è¯­è¨€åˆ‡æ¢
[ä¸­æ–‡ç‰ˆ](README.zh.md) | [English](README.md)

## é¡¹ç›®ç®€ä»‹
CapCut Mate API æ˜¯ä¸€æ¬¾å®Œå…¨å¼€æºå…è´¹ã€åŸºäº FastAPIæ„å»ºçš„å‰ªæ˜ è‰ç¨¿è‡ªåŠ¨åŒ–åŠ©æ‰‹ï¼Œæ”¯æŒç‹¬ç«‹éƒ¨ç½²ã€‚æœ¬é¡¹ç›®ä¸“æ³¨äºä¸ºå¤§æ¨¡å‹èµ‹èƒ½åŸºç¡€è§†é¢‘ç¼–è¾‘èƒ½åŠ›ï¼Œæä¾›å¼€ç®±å³ç”¨çš„è§†é¢‘å‰ªè¾‘ Skillsï¼Œå·²å°†å‰ªæ˜ æ ¸å¿ƒåŠŸèƒ½å…¨æµç¨‹è‡ªåŠ¨åŒ–ã€‚å¯ç›´æ¥å¯¹æ¥å¤§æ¨¡å‹å®ç°å¤šæ ·åŒ–æ™ºèƒ½è§†é¢‘å‰ªè¾‘ï¼Œè®©æ™®é€šç”¨æˆ·ä¹Ÿèƒ½å¿«é€Ÿåˆ¶ä½œå‡ºä¸“ä¸šé«˜çº§çš„è§†é¢‘ä½œå“ã€‚

é¡¹ç›®ä½¿ç”¨çµæ´»ï¼šæ—¢å¯ç‹¬ç«‹éƒ¨ç½²ï¼Œä¹Ÿå¯ç»“åˆ Coze æˆ– n8nè‡ªåŠ¨åŒ–å·¥ä½œæµï¼Œè¿˜èƒ½å¯¹æ¥å‰ªæ˜ å®ç°äº‘æ¸²æŸ“ï¼Œç›´æ¥å°†è‰ç¨¿ç”Ÿæˆæœ€ç»ˆè§†é¢‘ã€‚

## é¡¹ç›®ç›¸å…³èµ„æº
- [å‰ªæ˜ å°åŠ©æ‰‹](https://github.com/Hommy-master/capcut-mate)
- [å‰ªæ˜ å°åŠ©æ‰‹-æ‰£å­æ’ä»¶](https://www.coze.cn/store/plugin/7576197869707722771)

â­ å¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰ç‚¹å¸®åŠ©ï¼Œéº»çƒ¦ç‚¹ä¸ª Star æ”¯æŒä¸€ä¸‹ï¼æ‚¨çš„æ”¯æŒæ˜¯æˆ‘æŒç»­ç»´æŠ¤å’Œæ”¹è¿›é¡¹ç›®çš„æœ€å¤§åŠ¨åŠ› ğŸ˜Š

## åŠŸèƒ½ç‰¹ç‚¹
- ğŸ¬ è‰ç¨¿ç®¡ç†ï¼šåˆ›å»ºè‰ç¨¿ã€è·å–è‰ç¨¿ã€ä¿å­˜è‰ç¨¿
- ğŸ¥ ç´ ææ·»åŠ ï¼šæ·»åŠ è§†é¢‘ã€éŸ³é¢‘ã€å›¾ç‰‡ã€è´´çº¸ã€å­—å¹•ã€ç‰¹æ•ˆã€é®ç½©ç­‰
- ğŸ”§ é«˜çº§åŠŸèƒ½ï¼šå…³é”®å¸§æ§åˆ¶ã€æ–‡å­—æ ·å¼ã€åŠ¨ç”»æ•ˆæœç­‰
- ğŸ“¤ è§†é¢‘å¯¼å‡ºï¼šäº‘ç«¯æ¸²æŸ“ç”Ÿæˆæœ€ç»ˆè§†é¢‘
- ğŸ›¡ï¸ æ•°æ®éªŒè¯ï¼šä½¿ç”¨ Pydantic è¿›è¡Œè¯·æ±‚æ•°æ®éªŒè¯
- ğŸ“– RESTful APIï¼šç¬¦åˆæ ‡å‡†çš„ API è®¾è®¡è§„èŒƒ
- ğŸ“š è‡ªåŠ¨æ–‡æ¡£ï¼šFastAPI è‡ªåŠ¨ç”Ÿæˆäº¤äº’å¼ API æ–‡æ¡£

## æŠ€æœ¯æ ˆ
- Python 3.11+
- FastAPIï¼šé«˜æ€§èƒ½çš„ Web æ¡†æ¶
- Pydanticï¼šæ•°æ®éªŒè¯å’Œæ¨¡å‹å®šä¹‰
- Passlibï¼šå¯†ç åŠ å¯†ï¼ˆå¦‚æœä½¿ç”¨ç”¨æˆ·è®¤è¯ï¼‰
- Uvicornï¼šASGI æœåŠ¡å™¨
- uvï¼šPython åŒ…ç®¡ç†å™¨å’Œé¡¹ç›®ç®¡ç†å·¥å…·

## å¿«é€Ÿå¼€å§‹

### å‰ææ¡ä»¶
- Python 3.11+
- uvï¼šPython åŒ…ç®¡ç†å™¨å’Œé¡¹ç›®ç®¡ç†å·¥å…·

å®‰è£…æ–¹æ³•:
#### Windows
```powershell
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
```

#### Linux/macOS
```bash
sh -c "$(curl -LsSf https://astral.sh/uv/install.sh)"
```

### å®‰è£…æ­¥éª¤
1. å…‹éš†é¡¹ç›®
```bash
git clone git@github.com:Hommy-master/capcut-mate.git
cd capcut-mate
```

2. å®‰è£…ä¾èµ–
```bash
# å®‰è£…ä¾èµ–
uv sync

# windowsé¢å¤–æ‰§è¡Œ
uv pip install -e .[windows]
```

3. å¯åŠ¨æœåŠ¡å™¨
```bash
uv run main.py
```

4. è®¿é—®APIæ–‡æ¡£
å¯åŠ¨åè®¿é—® http://localhost:30000/docs æŸ¥çœ‹è‡ªåŠ¨ç”Ÿæˆçš„äº¤äº’å¼APIæ–‡æ¡£

### å®¹å™¨éƒ¨ç½²
```bash
docker pull gogoshine/capcut-mate:latest
docker run -p 30000:30000 gogoshine/capcut-mate:latest
```

æˆ–è€…ä½¿ç”¨ docker-compose:
```bash
docker-compose up -d
```

## ä¸€é”®å¯¼å…¥æ‰£å­æ’ä»¶

1. æ‰“å¼€æ‰£å­å¹³å°ï¼šhttps://coze.cn/home

   ![æ­¥éª¤1](./assets/coze1.png)

2. æ·»åŠ æ’ä»¶

   ![æ­¥éª¤2](./assets/coze2.png)

3. å¯¼å…¥æ’ä»¶

   ![æ­¥éª¤3](./assets/coze3.png)

4. ä¸Šä¼ å½“å‰å·¥ç¨‹ç›®å½•ä¸‹çš„openapi.yamlæ–‡ä»¶

   ![æ­¥éª¤4](./assets/coze4.png)

5. å®Œæˆæ–‡ä»¶ä¸Šä¼ 

   ![æ­¥éª¤5](./assets/coze5.png)

6. æ›¿æ¢logoå®Œæˆ

   ![æ­¥éª¤6](./assets/coze6.png)

7. å¯ç”¨æ’ä»¶

   ![æ­¥éª¤7](./assets/coze7.png)

## API æ¥å£æ–‡æ¡£

ä»¥ä¸‹æ˜¯ CapCut Mate API æä¾›çš„æ ¸å¿ƒæ¥å£ï¼Œæ”¯æŒå®Œæ•´çš„è§†é¢‘åˆ›ä½œå·¥ä½œæµç¨‹ï¼š

### ğŸ—ï¸ è‰ç¨¿ç®¡ç†
| æ¥å£ | åŠŸèƒ½ | æè¿° | æ–‡æ¡£é“¾æ¥ |
|------|------|------|----------|
| **create_draft** | åˆ›å»ºè‰ç¨¿ | åˆ›å»ºæ–°çš„å‰ªæ˜ è‰ç¨¿é¡¹ç›®ï¼Œè®¾ç½®ç”»å¸ƒå°ºå¯¸ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/create_draft.zh.md) |
| **save_draft** | ä¿å­˜è‰ç¨¿ | ä¿å­˜å½“å‰è‰ç¨¿çŠ¶æ€ï¼Œç¡®ä¿ç¼–è¾‘å†…å®¹æŒä¹…åŒ– | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/save_draft.zh.md) |
| **get_draft** | è·å–è‰ç¨¿ | è·å–è‰ç¨¿æ–‡ä»¶åˆ—è¡¨å’Œè¯¦ç»†ä¿¡æ¯ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/get_draft.zh.md) |

### ğŸ¥ è§†é¢‘ç´ æ
| æ¥å£ | åŠŸèƒ½ | æè¿° | æ–‡æ¡£é“¾æ¥ |
|------|------|------|----------|
| **add_videos** | æ·»åŠ è§†é¢‘ | æ‰¹é‡æ·»åŠ è§†é¢‘ç´ æï¼Œæ”¯æŒè£å‰ªã€ç¼©æ”¾ã€ç‰¹æ•ˆ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/add_videos.zh.md) |
| **add_images** | æ·»åŠ å›¾ç‰‡ | æ‰¹é‡æ·»åŠ å›¾ç‰‡ç´ æï¼Œæ”¯æŒåŠ¨ç”»å’Œè½¬åœºæ•ˆæœ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/add_images.zh.md) |
| **add_sticker** | æ·»åŠ è´´çº¸ | æ·»åŠ è£…é¥°è´´çº¸ï¼Œæ”¯æŒä½ç½®å’Œå¤§å°è°ƒæ•´ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/add_sticker.zh.md) |

### ğŸµ éŸ³é¢‘å¤„ç†
| æ¥å£ | åŠŸèƒ½ | æè¿° | æ–‡æ¡£é“¾æ¥ |
|------|------|------|----------|
| **add_audios** | æ·»åŠ éŸ³é¢‘ | æ‰¹é‡æ·»åŠ éŸ³é¢‘ç´ æï¼Œæ”¯æŒéŸ³é‡å’Œæ·¡å…¥æ·¡å‡º | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/add_audios.zh.md) |
| **get_audio_duration** | è·å–éŸ³é¢‘æ—¶é•¿ | è·å–éŸ³é¢‘æ–‡ä»¶çš„ç²¾ç¡®æ—¶é•¿ä¿¡æ¯ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/get_audio_duration.zh.md) |

### ğŸ“ æ–‡æœ¬å­—å¹•
| æ¥å£ | åŠŸèƒ½ | æè¿° | æ–‡æ¡£é“¾æ¥ |
|------|------|------|----------|
| **add_captions** | æ·»åŠ å­—å¹• | æ‰¹é‡æ·»åŠ å­—å¹•ï¼Œæ”¯æŒå…³é”®è¯é«˜äº®å’Œæ ·å¼è®¾ç½® | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/add_captions.zh.md) |
| **add_text_style** | æ–‡æœ¬æ ·å¼ | åˆ›å»ºå¯Œæ–‡æœ¬æ ·å¼ï¼Œæ”¯æŒå…³é”®è¯é¢œè‰²å’Œå­—ä½“ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/add_text_style.zh.md) |

### âœ¨ ç‰¹æ•ˆåŠ¨ç”»
| æ¥å£ | åŠŸèƒ½ | æè¿° | æ–‡æ¡£é“¾æ¥ |
|------|------|------|----------|
| **add_effects** | æ·»åŠ ç‰¹æ•ˆ | æ·»åŠ è§†è§‰ç‰¹æ•ˆï¼Œå¦‚æ»¤é•œã€è¾¹æ¡†ã€åŠ¨æ€æ•ˆæœ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/add_effects.zh.md) |
| **add_keyframes** | å…³é”®å¸§åŠ¨ç”» | åˆ›å»ºä½ç½®ã€ç¼©æ”¾ã€æ—‹è½¬ç­‰å±æ€§åŠ¨ç”» | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/add_keyframes.zh.md) |
| **add_masks** |é®ç½©æ•ˆæœ | æ·»åŠ å„ç§å½¢çŠ¶é®ç½©ï¼Œæ§åˆ¶ç”»é¢å¯è§åŒºåŸŸ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/add_masks.zh.md) |

### ğŸ¨ åŠ¨ç”»èµ„æº
| æ¥å£ | åŠŸèƒ½ | æè¿° | æ–‡æ¡£é“¾æ¥ |
|------|------|------|----------|
| **get_text_animations** | æ–‡æœ¬åŠ¨ç”» | è·å–å¯ç”¨çš„æ–‡æœ¬å…¥åœºã€å‡ºåœºã€å¾ªç¯åŠ¨ç”» | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/get_text_animations.zh.md) |
| **get_image_animations** | å›¾ç‰‡åŠ¨ç”» | è·å–å¯ç”¨çš„å›¾ç‰‡åŠ¨ç”»æ•ˆæœåˆ—è¡¨ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/get_image_animations.zh.md) |

### ğŸ¬ è§†é¢‘ç”Ÿæˆ
| æ¥å£ | åŠŸèƒ½ | æè¿° | æ–‡æ¡£é“¾æ¥ |
|------|------|------|----------|
| **gen_video** | ç”Ÿæˆè§†é¢‘ | æäº¤è§†é¢‘æ¸²æŸ“ä»»åŠ¡ï¼Œå¼‚æ­¥å¤„ç† | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/gen_video.zh.md) |
| **gen_video_status** | æŸ¥è¯¢çŠ¶æ€ | æŸ¥è¯¢è§†é¢‘ç”Ÿæˆä»»åŠ¡çš„è¿›åº¦å’ŒçŠ¶æ€ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/gen_video_status.zh.md) |

### ğŸš€ å¿«é€Ÿå·¥å…·
| æ¥å£ | åŠŸèƒ½ | æè¿° | æ–‡æ¡£é“¾æ¥ |
|------|------|------|----------|
| **easy_create_material** |å¿«é€Ÿåˆ›å»º | ä¸€æ¬¡æ€§æ·»åŠ å¤šç§ç±»å‹ç´ æï¼Œç®€åŒ–åˆ›å»ºæµç¨‹ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/easy_create_material.zh.md) |

### ğŸ› ï¸å·¥å…·ç±»æ¥å£
|æ¥å£ |åŠŸèƒ½ |æè¿° | æ–‡æ¡£é“¾æ¥ |
|------|------|------|----------|
| **get_url** | æå–URL | ä»è¾“å…¥å†…å®¹ä¸­æå–URLä¿¡æ¯ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/get_url.zh.md) |
| **search_sticker** |æœç´¢è´´çº¸ |æ ¹æ®å…³é”®è¯æœç´¢è´´çº¸ç´ æ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/search_sticker.zh.md) |
| **objs_to_str_list** | å¯¹è±¡è½¬å­—ç¬¦ä¸²åˆ—è¡¨ |å°†å¯¹è±¡åˆ—è¡¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨æ ¼å¼ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/objs_to_str_list.zh.md) |
| **str_list_to_objs** | å­—ç¬¦ä¸²åˆ—è¡¨è½¬å¯¹è±¡ |å°†å­—ç¬¦ä¸²åˆ—è¡¨è½¬æ¢ä¸ºå¯¹è±¡åˆ—è¡¨æ ¼å¼ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/str_list_to_objs.zh.md) |
| **str_to_list** | å­—ç¬¦ä¸²è½¬åˆ—è¡¨ |å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºåˆ—è¡¨æ ¼å¼ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/str_to_list.zh.md) |
| **timelines** | åˆ›å»ºæ—¶é—´çº¿ | ç”Ÿæˆè§†é¢‘ç¼–è¾‘æ‰€éœ€çš„æ—¶é—´çº¿é…ç½® | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/timelines.zh.md) |
| **audio_timelines** |éŸ³é¢‘æ—¶é—´çº¿ |æ ¹æ®éŸ³é¢‘æ—¶é•¿è®¡ç®—æ—¶é—´çº¿ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/audio_timelines.zh.md) |
| **audio_infos** |éŸ³é¢‘ä¿¡æ¯ |æ ¹æ®URLå’Œæ—¶é—´çº¿ç”ŸæˆéŸ³é¢‘ä¿¡æ¯ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/audio_infos.zh.md) |
| **imgs_infos** | å›¾ç‰‡ä¿¡æ¯ |æ ¹æ®URLå’Œæ—¶é—´çº¿ç”Ÿæˆå›¾ç‰‡ä¿¡æ¯ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/imgs_infos.zh.md) |
| **caption_infos** | å­—å¹•ä¿¡æ¯ |æ ¹æ®æ–‡æœ¬å’Œæ—¶é—´çº¿ç”Ÿæˆå­—å¹•ä¿¡æ¯ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/caption_infos.zh.md) |
| **effect_infos** |ç‰¹ä¿¡æ¯ | æ ¹æ®åç§°å’Œæ—¶é—´çº¿ç”Ÿæˆç‰¹æ•ˆä¿¡æ¯ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/effect_infos.zh.md) |
| **keyframes_infos** | å…³é”®å¸§ä¿¡æ¯ | æ ¹æ®é…ç½®ç”Ÿæˆå…³é”®å¸§ä¿¡æ¯ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/keyframes_infos.zh.md) |
| **video_infos** |è§†ä¿¡æ¯ä¿¡æ¯ | æ ¹æ®URLå’Œæ—¶é—´çº¿ç”Ÿæˆè§†é¢‘ä¿¡æ¯ | [ğŸ“– æŸ¥çœ‹æ–‡æ¡£](./docs/video_infos.zh.md) |

## API ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºè‰ç¨¿
```bash
curl -X POST "http://localhost:30000/openapi/capcut-mate/v1/create_draft" \
-H "Content-Type: application/json" \
-d '{"width": 1080, "height": 1920}'
```

### æ·»åŠ è§†é¢‘
```bash
curl -X POST "http://localhost:30000/openapi/capcut-mate/v1/add_videos" \
-H "Content-Type: application/json" \
-d '{
  "draft_url": "http://localhost:30000/openapi/capcut-mate/v1/get_draft?draft_id=20251126212753cab03392",
  "video_infos": [
    {
      "url": "https://example.com/video.mp4",
      "start": 0,
      "end": 1000000
    }
  ]
}'
```

## API æ–‡æ¡£
- æœ¬åœ°è®¿é—®: http://localhost:30000/docs
- ReDoc ç‰ˆæœ¬: http://localhost:30000/redoc

## å‰ªæ˜ å°åŠ©æ‰‹å®¢æˆ·ç«¯

å‰ªæ˜ å°åŠ©æ‰‹å®¢æˆ·ç«¯æä¾›äº†æ¡Œé¢ç«¯çš„ä¾¿æ·æ“ä½œç•Œé¢ï¼Œä»¥ä¸‹æ˜¯å¯åŠ¨æ–¹æ³•ï¼š

### macOS æ²™ç®±æƒé™è¯´æ˜

åœ¨ macOS ä¸Šè¿è¡Œæ—¶ï¼Œåº”ç”¨å¯èƒ½ä¼šè¯·æ±‚è®¿é—®ç‰¹å®šæ–‡ä»¶å¤¹çš„æƒé™ã€‚è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

1. å¦‚æœé¦–æ¬¡è¿è¡Œæ—¶å‡ºç°æƒé™æç¤ºï¼Œè¯·å…è®¸åº”ç”¨è®¿é—®æ‰€éœ€æ–‡ä»¶å¤¹
2. å¦‚éœ€æ‰‹åŠ¨é…ç½®ï¼Œè¯·å‰å¾€ `ç³»ç»Ÿåå¥½è®¾ç½® > å®‰å…¨æ€§ä¸éšç§ > éšç§ > æ–‡ä»¶å¤¹è®¿é—®`
3. ç¡®ä¿ CapCut Mate åº”ç”¨å·²è¢«æ·»åŠ åˆ°å…è®¸åˆ—è¡¨ä¸­

æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… [macOS æ²™ç®±æƒé™é…ç½®æŒ‡å—](./docs/macos_sandbox_setup.md)ã€‚

1. å®‰è£…ä¾èµ–

```bash
# åˆ‡æ¢npmé•œåƒæº - é€‚ç”¨äºwindows
set ELECTRON_MIRROR=https://npmmirror.com/mirrors/electron/

# åˆ‡æ¢yarné•œåƒæº - é€‚ç”¨äºlinux æˆ– mac
export ELECTRON_MIRROR="https://npmmirror.com/mirrors/electron/"

# å®‰è£…ä¾èµ–
npm install --verbose
```

2. å¯åŠ¨é¡¹ç›®

```bash
npm run web:dev
npm start
```

## å¼€æºç¤¾åŒºé—®é¢˜äº¤æµç¾¤
- å¾®ä¿¡ç¾¤ï¼š

  <img src="./assets/wechat-q.jpg" width="344" height="498" alt="å‰ªæ˜ å°åŠ©æ‰‹">

## å•†ä¸šåˆä½œ
- å¾®ä¿¡ï¼š

  <img src="./assets/wechat.jpg" width="220" height="220" alt="æŠ€æœ¯æ”¯æŒå¾®ä¿¡">

- é‚®ç®±ï¼štaohongmin51@gmail.com

---